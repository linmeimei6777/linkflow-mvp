<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>链接流 LinkFlow · 安装入口</title>

    <!-- iOS PWA 相关优化 -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="apple-mobile-web-app-title" content="LinkFlow" />

    <!-- 主题颜色 (Safari 顶栏 / Android 任务栏) -->
    <meta name="theme-color" content="#334155" />

    <!-- 禁止缓存，确保主屏幕更新 -->
    <meta
      http-equiv="Cache-Control"
      content="no-cache, no-store, must-revalidate"
    />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />

    <!-- PWA manifest -->
    <link rel="manifest" href="manifest.json" />

    <!-- iOS 图标 fallback -->
    <link rel="apple-touch-icon" href="icon-192.png" />

    <style>
      :root {
        --bg-light: #f8fafc;
        --bg-mid: #dbeafe;
        --bg-dark: #334155;

        --card: rgba(15, 23, 42, 0.6); /* 半透明深底卡片 */
        --text-main: #f8fafc;
        --text-sec: #94a3b8;
        --primary: #3b82f6;
        --border: #334155;
        --radius-xl: 20px;
      }

      * {
        box-sizing: border-box;
        -webkit-font-smoothing: antialiased;
      }

      body {
        margin: 0;

        /* 背景渐变，兼容 iOS WebApp */
        background: -webkit-linear-gradient(
          135deg,
          var(--bg-light) 0%,
          var(--bg-mid) 40%,
          var(--bg-dark) 100%
        ) !important;
        background: linear-gradient(
          135deg,
          var(--bg-light) 0%,
          var(--bg-mid) 40%,
          var(--bg-dark) 100%
        ) !important;

        background-attachment: fixed;
        background-size: cover;

        color: var(--text-main);
        font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text",
          "Segoe UI", Roboto, Helvetica, Arial, sans-serif;

        display: flex;
        min-height: 100vh;
        align-items: center;
        justify-content: center;
        padding: 24px;
      }

      .wrap {
        width: 100%;
        max-width: 420px;
      }

      .header {
        text-align: center;
        margin-bottom: 16px;
      }

      .logo-circle {
        width: 64px;
        height: 64px;
        background: radial-gradient(
          circle at 30% 30%,
          #4f46e5 0%,
          #1e1e2e 70%
        );
        border-radius: 16px;
        font-weight: 600;
        font-size: 20px;
        color: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 12px;
        border: 1px solid #6366f1;
        box-shadow: 0 20px 40px rgba(59, 130, 246, 0.35);
      }

      .app-name {
        font-size: 20px;
        font-weight: 600;
        color: var(--text-main);
        line-height: 1.3;
      }

      .tagline {
        font-size: 13px;
        color: var(--text-sec);
        line-height: 1.5;
        margin-top: 6px;
      }

      .card {
        background-color: var(--card);
        border: 1px solid var(--border);
        border-radius: var(--radius-xl);
        padding: 20px 20px 16px;
        box-shadow: 0 24px 64px rgba(0, 0, 0, 0.6);
      }

      .section-title {
        color: var(--text-sec);
        font-size: 12px;
        font-weight: 500;
        letter-spacing: 0.05em;
        text-transform: uppercase;
        margin-bottom: 12px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .env-badge {
        background: rgba(148, 163, 184, 0.12);
        color: var(--text-sec);
        border-radius: 999px;
        padding: 2px 8px;
        font-size: 11px;
        line-height: 1.4;
      }

      .btn-list {
        display: grid;
        gap: 10px;
        margin-bottom: 12px;
      }

      .btn {
        display: flex;
        align-items: center;
        justify-content: space-between;
        text-decoration: none;
        border-radius: 14px;
        padding: 14px 16px;
        border: 1px solid var(--border);
        background: rgba(15, 23, 42, 0.6);
        color: var(--text-main);
        font-size: 15px;
        font-weight: 600;
      }

      .btn .note {
        font-size: 12px;
        font-weight: 400;
        color: var(--text-sec);
        line-height: 1.4;
        margin-top: 2px;
      }

      .arrow {
        font-size: 20px;
        line-height: 1;
        color: var(--text-main);
        padding-left: 12px;
      }

      .primary {
        border-color: #6366f1;
        background: radial-gradient(
          circle at 30% 30%,
          #4f46e5 0%,
          #1e1e2e 70%
        );
        box-shadow: 0 20px 40px rgba(59, 130, 246, 0.35);
      }

      #hintBox {
        display: none;
        margin-top: 16px;
        font-size: 13px;
        line-height: 1.5;
        color: var(--text-main);
      }
      #hintBox strong {
        color: #fff;
        font-weight: 600;
      }
    </style>
  </head>

  <body>
    <div class="wrap">
      <div class="header">
        <div class="logo-circle">LF</div>
        <div class="app-name">链接流 LinkFlow</div>
        <div class="tagline">
          一键分发 iOS / Android / H5 · 支持添加到主屏幕体验
        </div>
      </div>

      <div class="card">
        <div class="section-title">
          <span>选择你的安装方式</span>
          <span class="env-badge" id="envTag">环境检测中…</span>
        </div>

        <div class="btn-list">
          <a class="btn primary" id="btnIOS" href="#">
            <div>
              <div>iOS 安装</div>
              <div class="note">
                Safari 打开后，点底部的「分享」按钮，选择
                「添加到主屏幕」
              </div>
            </div>
            <div class="arrow">›</div>
          </a>

          <a class="btn" id="btnAndroid" href="#">
            <div>
              <div>Android 安装</div>
              <div class="note">
                安装来源可为浏览器弹窗 / 添加到桌面 / 应用商店 / APK
              </div>
            </div>
            <div class="arrow">›</div>
          </a>

          <a
            class="btn"
            id="btnH5"
            href="https://linmeimei6777.github.io"
            target="_blank"
          >
            <div>
              <div>网页版 / 备用入口</div>
              <div class="note">浏览器立即打开使用</div>
            </div>
            <div class="arrow">›</div>
          </a>
        </div>

        <div id="hintBox">
          <div id="hintText"></div>
        </div>
      </div>
    </div>

    <script>
      const ua = navigator.userAgent || navigator.vendor || window.opera;
      const isIOS = /iPhone|iPad|iPod/i.test(ua);
      const isAndroid = /Android/i.test(ua);

      const btnIOS = document.getElementById("btnIOS");
      const btnAndroid = document.getElementById("btnAndroid");
      const btnH5 = document.getElementById("btnH5");
      const envTag = document.getElementById("envTag");
      const hintBox = document.getElementById("hintBox");
      const hintText = document.getElementById("hintText");

      function highlight(btn) {
        btn.classList.add("primary");
      }

      if (isIOS) {
        envTag.textContent = "iOS 设备";
        highlight(btnIOS);
        hintBox.style.display = "block";
        hintText.innerHTML =
          "在 Safari 打开后，点击底部的 <strong>分享</strong> 按钮，选择 <strong>添加到主屏幕</strong>。";
      } else if (isAndroid) {
        envTag.textContent = "Android 设备";
        highlight(btnAndroid);
        hintBox.style.display = "block";
        hintText.innerHTML =
          "安装来源可能是“安装到桌面”弹窗 / 添加到主屏幕 / 应用商店 / APK 安装。";
      } else {
        envTag.textContent = "其他设备 / 桌面浏览器";
        highlight(btnH5);
        hintBox.style.display = "block";
        hintText.innerHTML =
          "你目前不在手机上，使用网页可预览，正式使用请在手机打开或添加到主屏幕。";
      }
    </script>
  </body>
</html>
